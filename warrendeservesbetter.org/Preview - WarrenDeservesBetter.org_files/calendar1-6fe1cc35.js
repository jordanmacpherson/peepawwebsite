define("@widget/CALENDAR/calendar1-6fe1cc35.js",["exports","~/c/propTypes"],(function(e,t){"use strict";function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},o.apply(this,arguments)}const r="sectionTitle",s="sectionIntro",l="calendarType",n="icalURL",c="timezone",i="events",g="events.date",p="events.title",d="events.desc",u="events.allDay",b="events.start",h="events.end",y="events.location";function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.indexOf("facebook.com")>-1}const{selectors:{I18N:m,Account:T,Config:C,Website:R,Page:w,Stores:f,utils:{createSelector:v}}}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless,P=[{id:(global.Core||guac["@wsb/guac-widget-core"]).utils.uuid(),date:m.get("defaultEventDate"),title:m.get("defaultEventTitle"),desc:m.get("defaultEventDescription"),start:m.get("defaultEventStart"),end:m.get("defaultEventEnd"),location:m.get("defaultEventLocation")}],D=m.get("defaultValueForSectionTitle"),A=C.renderMode,L=T.id,N=T.market,M=C.env,S=m.staticContent,_=R.id,I=w.id,x=v(f.Widget.property("calendarType"),f.Widget.property("icalURL"),((e,t)=>"linked"===e&&E(t)));var U={__proto__:null,icalURL:"https://calendar.google.com/calendar/ical/wsb.vnext%40gmail.com/public/basic.ics",events:P,sectionTitle:D,calendarType:"linked",timezone:{zone:"GMT",offset:0},renderMode:A,accountId:L,locale:N,env:M,staticContent:S,websiteId:_,pageId:I,isFacebookCalendar:x};const O="eventDeleteButton",k="sectionDeleteButton",X="helpLink",{PropTypes:B}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless;var G={__proto__:null,eventDeleteButton:B.DeleteButton,sectionDeleteButton:B.DeleteButton,helpLink:B.ExternalLink};const{constants:{routes:F}}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless,z=F.BASE,q="/events/$",{selectors:{I18N:$,Reseller:H,Stores:j,utils:{createSelector:V}}}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless,{draft:{getPlainText:Z}}=(global.Core||guac["@wsb/guac-widget-core"]).utils;var W={[q]:{label:$.get("titleForEvents")},[r]:{label:$.get("titleForCalendarTitle"),placeholder:$.get("calendarTitleplaceholder")},[s]:{label:$.get("titleForCalendarIntro")},[l]:{options:[{value:"manual",label:$.get("titleForManualCalendar")},{value:"linked",label:$.get("titleForLinkedCalendar")}]},[i]:{to:q,label:$.get("titleForEvents"),getProps(e){const t=e.getFieldValue(l);return{items:e.value.map((e=>({label:e.title,description:Z(e.desc)}))),hidden:"linked"===t}}},[p]:{label:$.get("titleForEventTitle")},[d]:{label:$.get("titleForEventDescription")},[u]:{label:$.get("titleForEventAllDay")},[g]:{label:$.get("titleForEventDate")},[y]:{label:$.get("titleForEventLocation")},[b]:{label:$.get("titleForEventStart"),getProps:e=>({hidden:e.getFieldValue(u)})},[h]:{label:$.get("titleForEventEnd"),getProps:e=>({hidden:e.getFieldValue(u)})},[n]:{label:$.get("titleForCalendarIcalURL"),placeholder:$.get("icalURLplaceholder"),getProps:e=>({hidden:"linked"!==e.getFieldValue(l)})},[c]:{label:$.get("titleForTimezone"),getProps(e){const t="linked"!==e.getFieldValue(l);return{hidden:!E(e.getFieldValue(n))||t}}},[k]:{label:$.get("deleteSectionButton")},[O]:{label:$.get("deleteItemLabelForEvents"),confirm:!0,confirmTitle:$.get("deleteEventTitle"),confirmDescription:$.get("deleteEventText"),field:i,to:z},[X]:{label:$.get("helpLinkTitle"),description:$.get("helpLinkDescription"),link:V(H.isReseller,H.id,j.Config.key("rootDomain"),((e,t,a)=>e?`https://www.${a}/help/article/24592?pl_id=${t}`:`https://www.${a}/help/a-24592`)),linkText:$.get("helpLinkLabel"),openAsNewTab:!0,showAsLink:!0}};var Y=(global.keyMirror||guac.keymirror)({CALENDAR_SECTION_TITLE_RENDERED:null,CALENDAR_SECTION_INTRO_RENDERED:null,CALENDAR_RENDERED:null,CALENDAR_SMALLER_SCREEN_CONTAINER:null,CALENDAR_BIGGER_SCREEN_CONTAINER:null,CALENDAR_EVENT_DAY:null,CALENDAR_EVENT_DATE:null,CALENDAR_EVENT_TIME:null,CALENDAR_EVENT_TITLE:null,CALENDAR_DESC:null,CALENDAR_DESC_BEGINNING:null,CALENDAR_DESC_ELIPSIS:null,CALENDAR_DESC_EXPAND:null,CALENDAR_DESC_TEXT:null,CALENDAR_SHOW_NEXT_EVENTS:null,CALENDAR_SHOW_PREV_EVENTS:null,CALENDAR_EVENT_NAVIGATION:null,CALENDAR_NO_EVENT_MSG:null});class K extends(global.React||guac.react).Component{static get propTypes(){return{id:(global.PropTypes||guac["prop-types"]).string.isRequired,locale:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string.isRequired,env:(global.PropTypes||guac["prop-types"]).string.isRequired,category:(global.PropTypes||guac["prop-types"]).string,className:(global.PropTypes||guac["prop-types"]).string,sectionTitle:(global.PropTypes||guac["prop-types"]).string,icalURL:(global.PropTypes||guac["prop-types"]).string,accountId:(global.PropTypes||guac["prop-types"]).string.isRequired,websiteId:(global.PropTypes||guac["prop-types"]).string.isRequired,pageId:(global.PropTypes||guac["prop-types"]).string.isRequired,anchorId:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,visitorMode:(global.PropTypes||guac["prop-types"]).bool}}render(){const{isManual:e,visitorMode:t,staticContent:a={}}=this.props,o=a[t||e?"editNoEvents":"publishNoEvents"];return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading,{tag:"h4","data-aid":Y.CALENDAR_NO_EVENT_MSG,style:{textAlign:"center"}},o)))}}var J=5;class Q{constructor(e){this.date="object"==typeof e?e:"string"==typeof e?new Date(e):new Date}static locale(e){Q._locale=e}locale(e){this._locale=e}get(e){const t={day:this.date.getDate.bind(this.date),month:this.date.getMonth.bind(this.date),year:this.date.getFullYear.bind(this.date),hour:this.date.getHours.bind(this.date),minute:this.date.getMinutes.bind(this.date),second:this.date.getSeconds.bind(this.date),timeZoneOffset:()=>this._timeZoneOffset};return-1===(global._||guac.lodash).keys(t).indexOf(e)?null:t[e]()}set(e,t){const a={day:this.date.setDate.bind(this.date),month:this.date.setMonth.bind(this.date),year:this.date.setFullYear.bind(this.date),hour:this.date.setHours.bind(this.date),minute:this.date.setMinutes.bind(this.date),second:this.date.setSeconds.bind(this.date),timeZoneOffset:e=>{this._timeZoneOffset=e}};return-1===(global._||guac.lodash).keys(a).indexOf(e)?null:(a[e](t),this)}isSame(e,t){return e.get(t)===this.get(t)}toLocaleString(e,t){const a=t||this._locale||Q._locale||"en-US",o={},r=new Date,s=this.date.getTime()+6e4*this.date.getTimezoneOffset()+6e4*(this._timeZoneOffset||0);r.setTime(s);(e&Q.WEEKDAY)>0&&(o.weekday="short"),(e&Q.YEAR)>0&&(o.year="numeric"),(e&Q.MONTH)>0&&(o.month="short"),((e&Q.DAY)>0||(e&Q.DAY_ORDINAL)>0)&&(o.day="numeric"),(e&Q.HOUR)>0&&(o.hour="numeric"),(e&Q.MINUTE)>0&&(o.minute="numeric"),(e&Q.SECOND)>0&&(o.second="numeric");const l=(()=>{let t="";if((e&Q.DAY_ORDINAL)>0&&"en"===a.split("-")[0]){const e=r.toLocaleString(a,{day:"numeric"}),o=/\d+/.exec(e);if(o){const e=parseInt(o[0],10);t="th",-1!==[1,21,31].indexOf(e)&&(t="st"),-1!==[2,22].indexOf(e)&&(t="nd"),-1!==[3,23].indexOf(e)&&(t="rd")}}return t})(),n=r.toLocaleString(a,o),c=/\d+/.exec(n);return l&&c?n.replace(c[0],`${c[0]}${l}`):n}toISOString(){return this.date.toISOString()}}a(Q,"WEEKDAY",1),a(Q,"YEAR",16),a(Q,"MONTH",256),a(Q,"DAY",4096),a(Q,"HOUR",65536),a(Q,"MINUTE",1048576),a(Q,"SECOND",16777216),a(Q,"DAY_ORDINAL",268435456),a(Q,"_locale","");const ee=e=>{const t=/[-+]{1}(\d{2}):(\d{2})$/.exec(e);if(t)return(t[0].startsWith("+")?1:-1)*(60*parseInt(t[1],10)+parseInt(t[2],10));return/Z$/.test(e)?0:-1*new Date(e).getTimezoneOffset()},te=Q.WEEKDAY,ae=Q.MONTH,oe=Q.DAY_ORDINAL,re=Q.DAY,se=ae|oe,le=re|ae,ne="-",ce=["fr-FR","en-AU","en-UK","en-HK","en-IE","en-IL","en-IN","en-MY","en-NZ","en-PK","en-SG","en-ZA"];class ie extends(global.React||guac.react).Component{static get propTypes(){return{locale:(global.PropTypes||guac["prop-types"]).string,start:(global.PropTypes||guac["prop-types"]).string.isRequired,end:(global.PropTypes||guac["prop-types"]).string.isRequired,smallScreen:(global.PropTypes||guac["prop-types"]).bool,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,order:(global.PropTypes||guac["prop-types"]).number.isRequired,date:(global.PropTypes||guac["prop-types"]).string,timezone:(global.PropTypes||guac["prop-types"]).shape({offset:(global.PropTypes||guac["prop-types"]).number,zone:(global.PropTypes||guac["prop-types"]).string})}}constructor(e){super(e);const{locale:t}=this.props;Q.locale(t);const a=new Q(this.props.start),o=new Q(this.props.end);this.state={start:a,end:o,sameDayEvent:a.isSame(o,"day"),sameMonthEvent:a.isSame(o,"month")}}renderDays(){const{start:e,end:t}=this.state,{locale:a,isManual:o,timezone:r}=this.props;return o?null:(r?(e.set("timeZoneOffset",r.offset),t.set("timeZoneOffset",r.offset)):(e.set("timeZoneOffset",ee(this.props.start)),t.set("timeZoneOffset",ee(this.props.end))),e.locale(a),t.locale(a),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading.Sub,{tag:"div","data-aid":Y.CALENDAR_EVENT_DAY},this.state.sameDayEvent?e.toLocaleString(te):`${e.toLocaleString(te)} - ${t.toLocaleString(te)}`))}renderDate(){const{start:e,end:t,sameDayEvent:a,sameMonthEvent:o}=this.state,{smallScreen:r,locale:s,date:l,isManual:n,order:c}=this.props,i=ce.includes(s),g=i?e.toLocaleString(le):e.toLocaleString(se),p=i?t.toLocaleString(le):t.toLocaleString(se),d=s.match(/en/)?oe:re,u=i?[d,ae]:[ae,d],b=(global.React||guac.react).createElement("span",null,e.toLocaleString(u[0]),(global.React||guac.react).createElement("br",null),e.toLocaleString(u[1])),h=n?{"data-field-id":"events.date","data-field-route":`/events/${c}`}:{};return n?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,h,l):a?r?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,h,g):(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,h,b):o?r?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,h,g+ne+t.toLocaleString(oe)):(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,h,e.toLocaleString(ae),(global.React||guac.react).createElement("br",null),e.toLocaleString(oe)+ne+t.toLocaleString(oe)):(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,h,g+ne,(global.React||guac.react).createElement("br",null),p)}render(){return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,null,this.renderDays(),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":Y.CALENDAR_EVENT_DATE,children:this.renderDate()}))}}const ge={display:"inline-block"},pe=Q.HOUR|Q.MINUTE;class de extends(global.React||guac.react).Component{static get propTypes(){return{locale:(global.PropTypes||guac["prop-types"]).string,allDay:(global.PropTypes||guac["prop-types"]).bool,start:(global.PropTypes||guac["prop-types"]).oneOfType([(global.PropTypes||guac["prop-types"]).object,(global.PropTypes||guac["prop-types"]).string]).isRequired,end:(global.PropTypes||guac["prop-types"]).oneOfType([(global.PropTypes||guac["prop-types"]).object,(global.PropTypes||guac["prop-types"]).string]).isRequired,staticContent:(global.PropTypes||guac["prop-types"]).object,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,order:(global.PropTypes||guac["prop-types"]).number.isRequired,timezone:(global.PropTypes||guac["prop-types"]).shape({offset:(global.PropTypes||guac["prop-types"]).number,zone:(global.PropTypes||guac["prop-types"]).string})}}getRouteProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start";const{order:t,isManual:a}=this.props;return a?{"data-field-id":`events.${e}`,"data-field-route":`/events/${t}`}:{}}renderTimes(e,t){const{isManual:a}=this.props;if(a&&!e)return null;const r=a?e:(e||"").toLocaleString(pe),s=a?t:(t||"").toLocaleString(pe),l=r?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,o({},this.getRouteProps("start"),{style:ge}),r):null,n=s?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,o({},this.getRouteProps("end"),{style:ge}),s):null,c=e&&t?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,{style:{paddingHorizontal:"xsmall",...ge}}," ","-"," "):null;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,null,l,c,n)}render(){const{locale:e,allDay:t,isManual:a,timezone:o,staticContent:r={},order:s}=this.props;let l=this.props.start,n=this.props.end;a||(l=new Q(this.props.start),n=new Q(this.props.end),o?(l.set("timeZoneOffset",o.offset),n.set("timeZoneOffset",o.offset)):(l.set("timeZoneOffset",ee(this.props.start)),n.set("timeZoneOffset",ee(this.props.end))),l.locale(e),n.locale(e));const c=t?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,{"data-route":a&&`events/${s}`},r.allDay):this.renderTimes(l,n);return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":Y.CALENDAR_EVENT_TIME},c)}}const{EDIT:ue}=(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes,be=140,he=/https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s<]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s<]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]\.[^\s<]{2,}|www\.[a-zA-Z0-9]\.[^\s<]{2,}/,ye=/<br><\/\s*br>|<br\s*\/>|<br>/,Ee=/[\r\n\u21b5]/,me=/<a[^>]*>[^<]+<\/a>/,Te=new RegExp(`(${he.source}|${ye.source}|${Ee.source}|${me.source})`,"g");class Ce extends(global.React||guac.react).Component{static get propTypes(){return{desc:(global.PropTypes||guac["prop-types"]).string,smallScreen:(global.PropTypes||guac["prop-types"]).bool,eventDetails:(global.PropTypes||guac["prop-types"]).string,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,order:(global.PropTypes||guac["prop-types"]).number.isRequired,renderMode:(global.PropTypes||guac["prop-types"]).string}}constructor(e){super(e);const{isManual:t,renderMode:a}=e;this.descBeginning=0,this.descCount=0,this.brCount=0,this.shouldRenderExpandButton=!1,this.onButtonClick=this.onButtonClick.bind(this),this.state={expanded:t&&a===ue}}renderAnchor(e,t){const{expanded:a}=this.state,o=(global._||guac.lodash).nth(/>(.*?)<\/a>/.exec(e),1)||"",r=(global._||guac.lodash).nth(/\shref="(.*?)"/.exec(e),1)||"",s=Object.assign({},t,{target:"_blank",href:r?(l=r,0===l.indexOf("http")?l:`http://${l}`):"",children:o});var l;return this.descCount+=o.length,!a&&this.descCount>be?null:(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Link,s)}renderAnchorFromUrl(e,t){const{expanded:a}=this.state,o=Object.assign({},t,{href:0===e.indexOf("http")?e:`http://${e}`,target:"_blank"});return this.descCount+=e.length,!a&&this.descCount>be?null:(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Link,o)}renderBreakpoint(){const{expanded:e}=this.state;return this.brCount++,this.descBeginning++,!e&&this.brCount>3?(this.descCount=141,null):(global.React||guac.react).createElement("br",null)}renderDescElement(e,t){const{expanded:a}=this.state;let o=e;return!a&&this.descCount+e.length>be&&(o=o.substring(0,be-this.descCount)),this.descCount+=e.length,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Element,t,RegExp(Ee).test(e)&&(global.React||guac.react).createElement("br",null),o)}getDescElementProps(e,t){const a={children:e};return t===this.descBeginning&&(a["data-aid"]=Y.CALENDAR_DESC_BEGINNING),a}formatText(e){const{isManual:t,renderMode:a}=this.props,{expanded:o}=this.state;if(o&&t&&a!==ue)return e;const r=e.split(Te);this.descBeginning=0,this.descCount=0,this.brCount=0;const s=t?this.formatManualDesc(e):this.formatLinkedDesc(r);return this.descCount>be?(o||t||s.push(this.renderElipsis()),this.shouldRenderExpandButton=!0):this.shouldRenderExpandButton=!1,s}formatLinkedDesc(e){return e.map(((e,t)=>{if(!e)return this.descBeginning++,null;const a=this.getDescElementProps(e,t);return RegExp(me).test(e)?this.renderAnchor(e,a):RegExp(he).test(e)?this.renderAnchorFromUrl(e,a):RegExp(`^${ye.source}|${Ee.source}$`).test(e)?this.renderBreakpoint():this.renderDescElement(e,a)}))}formatManualDesc(e){let t=!0;const a=(global._||guac.lodash).attempt((()=>{try{return JSON.parse(e)}catch(a){return t=!1,[{text:e,type:"unstyled"}]}}),[e]),o=t?a.blocks:a,r=[];for(let e=0;e<o.length;e++){const t=o[e],a=t.text,s=this.descCount;if(this.descCount+=a.length,this.descCount>be){t.text=a.substring(0,be-s)+"...",r.push(t);break}r.push(t)}return t?(a.blocks=r,JSON.stringify(a)):JSON.stringify({blocks:r,entityMap:{}})}renderElipsis(){return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Element,{"data-aid":Y.CALENDAR_DESC_ELIPSIS},"...")}renderExpandButton(){const{expanded:e}=this.state;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.MoreLink.Expand,{tag:"span",expanded:e,"data-aid":Y.CALENDAR_DESC_EXPAND,style:{marginTop:"small",userSelect:"none"},onClick:this.onButtonClick},this.props.eventDetails)}onButtonClick(){this.setState({expanded:!this.state.expanded})}render(){const{smallScreen:e,desc:t,isManual:a,order:r}=this.props,{expanded:s}=this.state;if(!t)return null;const l=t.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<(?!br|\/br|a|\/a\s*\/?)(?!a\s*\/?)[^>]+>/g,""),n=e&&!s,c=a?{"data-field-id":"events.desc","data-field-route":`/events/${r}`}:{};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":Y.CALENDAR_DESC},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,o({richtext:a,"data-aid":Y.CALENDAR_DESC_TEXT,style:{marginTop:"small"}},c),!n&&this.formatText(l)),e||this.shouldRenderExpandButton?this.renderExpandButton():null)}}a(Ce,"defaultProps",{isManual:!1});const{utils:{getRoute:Re}}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless;class we extends(global.React||guac.react).Component{static get propTypes(){return{allDay:(global.PropTypes||guac["prop-types"]).bool,start:(global.PropTypes||guac["prop-types"]).oneOfType([(global.PropTypes||guac["prop-types"]).object,(global.PropTypes||guac["prop-types"]).string]),end:(global.PropTypes||guac["prop-types"]).oneOfType([(global.PropTypes||guac["prop-types"]).object,(global.PropTypes||guac["prop-types"]).string]),date:(global.PropTypes||guac["prop-types"]).string,desc:(global.PropTypes||guac["prop-types"]).string,title:(global.PropTypes||guac["prop-types"]).string,location:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object,locale:(global.PropTypes||guac["prop-types"]).string,order:(global.PropTypes||guac["prop-types"]).number,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,timezone:(global.PropTypes||guac["prop-types"]).shape({zone:(global.PropTypes||guac["prop-types"]).string,offset:(global.PropTypes||guac["prop-types"]).number}),renderMode:(global.PropTypes||guac["prop-types"]).string,index:(global.PropTypes||guac["prop-types"]).number.isRequired}}renderEventTitle(){const{title:e,isManual:t,order:a}=this.props,r=t?{"data-field-id":"events.title","data-field-route":`/events/${a}`}:{};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,o({children:e,"data-aid":Y.CALENDAR_EVENT_TITLE},r))}renderEventLocation(){const{isManual:e,location:t,order:a}=this.props,r=e?{"data-field-id":"events.location","data-field-route":`/events/${a}`}:{};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,o({style:{marginTop:"small"},children:t},r))}renderForSmallScreens(){const{desc:e,isManual:t,order:a,staticContent:r={},renderMode:s}=this.props,l=r.eventDetails;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1,"data-aid":Y.CALENDAR_SMALLER_SCREEN_CONTAINER,style:{marginLeft:0,marginRight:0,"@sm":{display:"none"}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{xs:12,style:{paddingLeft:0,marginBottom:"xxsmall"}},(global.React||guac.react).createElement(ie,o({smallScreen:!0},this.props))),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{xs:12,style:{paddingRight:0,paddingLeft:0,marginBottom:"xxsmall"}},this.renderEventTitle(),(global.React||guac.react).createElement(de,this.props),this.renderEventLocation(),(global.React||guac.react).createElement(Ce,{smallScreen:!0,desc:e,eventDetails:l,isManual:t,order:a,renderMode:s})))}renderForLargeScreens(){const{desc:e,isManual:t,order:a,staticContent:o={},renderMode:r}=this.props,s=o.eventDetails;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1,"data-aid":Y.CALENDAR_BIGGER_SCREEN_CONTAINER,style:{display:"none","@sm":{display:"flex"}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{sm:3,style:{paddingLeft:"0px !important"}},(global.React||guac.react).createElement(ie,this.props)),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{sm:6,style:{textAlign:"left"}},this.renderEventTitle(),(global.React||guac.react).createElement(Ce,{desc:e,eventDetails:s,isManual:t,order:a,renderMode:r})),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{sm:3,style:{textAlign:"right",paddingRight:"0px !important"}},(global.React||guac.react).createElement(de,this.props),this.renderEventLocation()))}render(){const{isManual:e,index:t}=this.props,a=e?i:void 0,o=e?Re(q,[t]):void 0;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1,style:{width:"100%",borderBottom:"1px solid #bfbfbf",paddingTop:0===this.props.order?"0":"xlarge",paddingBottom:"xlarge",marginLeft:"0 !important"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{"data-field-id":a,"data-field-route":o},this.renderForSmallScreens(),this.renderForLargeScreens()))}}const{renderModes:fe}=(global.Core||guac["@wsb/guac-widget-core"]).constants;class ve extends(global.React||guac.react).Component{static get propTypes(){return{locale:(global.PropTypes||guac["prop-types"]).string,events:(global.PropTypes||guac["prop-types"]).arrayOf((global.PropTypes||guac["prop-types"]).object).isRequired,smallScreen:(global.PropTypes||guac["prop-types"]).bool,anchorId:(global.PropTypes||guac["prop-types"]).string,id:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string,visitorMode:(global.PropTypes||guac["prop-types"]).bool,staticContent:(global.PropTypes||guac["prop-types"]).object,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,timezone:(global.PropTypes||guac["prop-types"]).object}}constructor(e){super(e),this.state={offset:0},this.showNextPage=this.showNextPage.bind(this),this.showPrevPage=this.showPrevPage.bind(this),this.scrollToSectionTop=this.scrollToSectionTop.bind(this)}renderEvents(){const{events:e,staticContent:t,locale:a,isManual:r,timezone:s,renderMode:l}=this.props,n=this.state.offset,c=n+J;return e.slice(n,c).map(((e,c)=>(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{key:e.id},(global.React||guac.react).createElement(we,o({staticContent:t,locale:a,order:n+c,isManual:r,timezone:s,renderMode:l,index:c},e)))))}scrollToSectionTop(e){const{id:t,renderMode:a}=this.props;if(fe&&a!==fe.PUBLISH||!t)return;e.preventDefault();const o=document.querySelector(`[id='${t}']`).offsetTop,r=(e,t,a)=>{if(!(a<=0)){var o=(t-e.scrollTop)/a*10;setTimeout((function(){e.scrollTop=e.scrollTop+o,e.scrollTop!==t&&r(e,t,a-10)}),10)}};r(document.body,o,500)}renderNavigation(){const{events:e,staticContent:t={}}=this.props;if(e.length<=J)return null;const a=t.moreEvents,o=e.length>J&&this.state.offset+J<e.length;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1,"data-aid":Y.CALENDAR_EVENT_NAVIGATION},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{style:{marginTop:"medium"}},this.renderPrevEventsBtn(a,o),o&&this.renderNextEventsBtn(a)))}renderNextEventsBtn(e){const{id:t}=this.props;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.MoreLink.Forward,{tag:"span","data-aid":Y.CALENDAR_SHOW_NEXT_EVENTS,"data-section-jump":t,onClick:this.showNextPage,style:{userSelect:"none"},children:e})}renderPrevEventsBtn(e,t){if(0===this.state.offset)return null;const{id:a}=this.props;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.MoreLink.Backward,{tag:"span","data-aid":Y.CALENDAR_SHOW_PREV_EVENTS,"data-section-jump":a,onClick:this.showPrevPage,style:{userSelect:"none",paddingRight:t?"small":0},children:e})}showPrevPage(e){this.scrollToSectionTop(e),this.setState({offset:this.state.offset-J})}showNextPage(e){this.scrollToSectionTop(e),this.setState({offset:this.state.offset+J})}renderAnchor(){if(this.props.anchorId)return(global.React||guac.react).createElement("a",{id:this.props.anchorId})}render(){if(this.props.events.length>0){const e="\n        .cal-nav-arrow {\n          opacity: .8;\n          cursor: pointer;\n        }\n        .cal-nav-arrow:hover {\n          opacity: 1;\n        }\n      ";return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,null,(global.React||guac.react).createElement("style",null,e),this.renderAnchor(),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{key:this.state.offset},this.renderEvents()),this.renderNavigation())))}return(global.React||guac.react).createElement(K,this.props)}}var Pe={local:{calendarDomain:"https://calendar.apps.dev-secureserver.net"},development:{calendarDomain:"https://calendar.apps.dev-secureserver.net"},test:{calendarDomain:"https://calendar.apps.test-secureserver.net"},production:{calendarDomain:"https://calendar.apps.secureserver.net"}};const De={"zh-SG":"zh-CN"},Ae=e=>e?De[e]||e:"en";function Le(e,t,a){return{allDay:!1,title:e.title,start:t.toISOString(),end:a.toISOString(),desc:e.desc,location:e.location}}function Ne(e,t){let{days:a,hours:o,minutes:r}=t;const s=new Q(e.toISOString());return a&&s.set("day",s.get("day")+a),o&&s.set("hour",s.get("hour")+o),r&&s.set("minute",s.get("minute")+r),s}function Me(e){const t=e.defaultEvents,a=(new Q).set("hour",0).set("minute",0).set("second",0);return[Le(t.one,Ne(a,{hours:18}),Ne(a,{hours:21})),Le(t.two,Ne(a,{days:2,hours:8,minutes:30}),Ne(a,{days:2,hours:10,minutes:30})),Le(t.three,Ne(a,{days:4,hours:10}),Ne(a,{days:4,hours:17})),Le(t.four,Ne(a,{days:5,hours:17}),Ne(a,{days:5,hours:18})),Le(t.one,Ne(a,{days:7,hours:18}),Ne(a,{days:7,hours:21})),Le(t.two,Ne(a,{days:9,hours:8,minutes:30}),Ne(a,{days:9,hours:10,minutes:30}))]}const{postRender:{Actions:Se,monitor:_e,onWidgetRendered:Ie}}=(global.Core||guac["@wsb/guac-widget-core"]).utils,xe="https://calendar.google.com/calendar/ical/wsb.vnext%40gmail.com/public/basic.ics";class Ue extends(global.React||guac.react).Component{static get propTypes(){return{env:(global.PropTypes||guac["prop-types"]).string,icalURL:(global.PropTypes||guac["prop-types"]).string,websiteId:(global.PropTypes||guac["prop-types"]).string,pageId:(global.PropTypes||guac["prop-types"]).string,locale:(global.PropTypes||guac["prop-types"]).string,id:(global.PropTypes||guac["prop-types"]).string,anchorId:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string,visitorMode:(global.PropTypes||guac["prop-types"]).bool,detachedMode:(global.PropTypes||guac["prop-types"]).bool,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,manualEvents:(global.PropTypes||guac["prop-types"]).arrayOf((global.PropTypes||guac["prop-types"]).object).isRequired,timezone:(global.PropTypes||guac["prop-types"]).object}}constructor(e){super(e),this.regex=new RegExp("(^http(s)*|^webcal)://.+","i"),this.state={linkedEvents:[],loading:!0}}componentDidMount(){const{id:e,isManual:t}=this.props;this._isMounted=!0,t||(_e(e,Se.SCROLL_TO_URL_FRAGMENT),this.getEvents())}componentDidUpdate(e,t){if(t.loading&&!this.state.loading&&Ie(this.props.id,Se.SCROLL_TO_URL_FRAGMENT),!this.regex.test(this.props.icalURL))return;const a=e.icalURL!==this.props.icalURL,o=e.isManual&&!this.props.isManual;(a||o)&&this.getEvents(this.props.icalURL)}componentWillUnmount(){this._isMounted=!1}fetchEvents(e){const{env:t,websiteId:a,pageId:o,id:r}=this.props;let s=`${(Pe&&Pe[t]||{}).calendarDomain}/v1/events/${a}/${o}/${r}`;e&&(s+=`?icalURL=${encodeURIComponent(e)}`,s+=`?t=${Math.floor((new Date).getTime()/3e5)}`);const l=new XMLHttpRequest;l.open("GET",s,!0),l.send(),l.onreadystatechange=()=>{4===l.readyState&&this._isMounted&&this.setState({linkedEvents:200===l.status?JSON.parse(l.responseText).events:[],loading:!1})}}shouldGenerateEventsLocally(e){const{detachedMode:t,icalURL:a,staticContent:o}=this.props;return!!o.defaultEvents&&(t||e===xe||!e&&a===xe)}getEvents(e){const{staticContent:t}=this.props;this._isMounted&&(this.setState({loading:!0}),this.shouldGenerateEventsLocally(e)?this._isMounted&&this.setState({linkedEvents:Me(t),loading:!1}):this.fetchEvents(e))}render(){const{anchorId:e,id:t,visitorMode:a,staticContent:o,locale:r,renderMode:s,isManual:l,timezone:n}=this.props;if(!l&&(this.state.loading||"undefined"==typeof window))return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1,style:{paddingVertical:"large",minHeight:"100vh"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{style:{textAlign:"center"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Loader,{size:"medium"})));const c=l?this.props.manualEvents:this.state.linkedEvents;return(global.React||guac.react).createElement(ve,{events:c,anchorId:e,id:t,renderMode:s,visitorMode:a,staticContent:o,locale:Ae(r),isManual:l,timezone:n})}}const{Bootstrap:Oe}=(global.Core||guac["@wsb/guac-widget-core"]).components;class ke extends(global.React||guac.react).Component{static get propTypes(){return{id:(global.PropTypes||guac["prop-types"]).string.isRequired,locale:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string.isRequired,env:(global.PropTypes||guac["prop-types"]).string.isRequired,category:(global.PropTypes||guac["prop-types"]).string,className:(global.PropTypes||guac["prop-types"]).string,sectionTitle:(global.PropTypes||guac["prop-types"]).string,icalURL:(global.PropTypes||guac["prop-types"]).string,accountId:(global.PropTypes||guac["prop-types"]).string.isRequired,websiteId:(global.PropTypes||guac["prop-types"]).string.isRequired,pageId:(global.PropTypes||guac["prop-types"]).string.isRequired,anchorId:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,calendarType:(global.PropTypes||guac["prop-types"]).string,events:(global.PropTypes||guac["prop-types"]).arrayOf((global.PropTypes||guac["prop-types"]).object),timezone:(global.PropTypes||guac["prop-types"]).object,isFacebookCalendar:(global.PropTypes||guac["prop-types"]).bool}}render(){const{env:e,icalURL:t,websiteId:a,accountId:r,pageId:s,id:l,renderMode:n,staticContent:c,locale:i,calendarType:g,events:p,timezone:d,isFacebookCalendar:u}=this.props,b="manual"===g,h={env:e,icalURL:t,websiteId:a,accountId:r,pageId:s,id:l,renderMode:n,staticContent:c,locale:i,isManual:b,...u&&!b&&{timezone:d}},y=`${l}-bootstrap-container`,E=n===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PUBLISH||n===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PREVIEW,m=n===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.DISPLAY||n===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.ADD;return!b||p&&0!==p.length?(global.React||guac.react).createElement(Oe.Radpack,o({Component:Ue,exportedComponent:"Calendar",domTargetId:y,anchorId:this.props.anchorId,visitorMode:E,detachedMode:m,manualEvents:p||[],entry:"@widget/CALENDAR/bs-calendar"},h)):(global.React||guac.react).createElement(K,o({visitorMode:E,isManual:b},this.props))}}const{Widget:Xe}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless;class Be extends Xe{renderIntro(){const{sectionTitle:e,sectionIntro:t}=this.props;return e||t?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Intro,{heading:{children:e,"data-aid":Y.CALENDAR_SECTION_TITLE_RENDERED,"data-route":r},text:{children:t,richtext:!0,"data-route":s,"data-aid":Y.CALENDAR_SECTION_INTRO_RENDERED}}):null}render(){const{category:e,section:t}=this.props,a=Math.random().toString(36).substr(2,5);return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Widget,this.props,(global.React||guac.react).createElement("div",null),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Section,{category:e,section:t},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,null,this.renderIntro(),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Group,null,(global.React||guac.react).createElement(ke,o({anchorId:a},this.props))))))}}a(Be,"propTypes",{...(global.Core||guac["@wsb/guac-widget-core"]).Maniless.Widget.propTypes,...t.p}),a(Be,"defaultProps",{...(global.Core||guac["@wsb/guac-widget-core"]).Maniless.Widget.defaultProps,...U});const{utils:{createMutator:Ge}}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless;var Fe=Ge({routes:{[z]:[X,r,s,l,i,c,n,k],[q]:[g,p,d,u,b,h,y,O]}},{fields:G,defaultProps:W}),ze=(global.Core||guac["@wsb/guac-widget-core"]).Maniless.connect(Be,Fe);e.Component=ze,e.component="@widget/CALENDAR/calendar1",e.default=ze,e.hooks="@widget/CALENDAR/hooks",e.id="calendar1",e.src="/home/jenkins/workspace/gdcorp-im/guac-widget-calendar/build-master/src/layouts/calendar1/index.js",e.type="CALENDAR",Object.defineProperty(e,"__esModule",{value:!0})})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=calendar1-6fe1cc35.js.map
